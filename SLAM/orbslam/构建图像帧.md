# 构建图像帧
2023-11-06

在构建图像帧时，主要分为以下几个部分
- 提取特征点


## 提取特征点

提取特征点主要分为生成图像金字塔、提取FAST特征点、计算特征点描述子三个部分
### 生成图像金字塔
在计算生成金字塔的时候，只进行调整大小操作，不进行高斯模糊，为了不浪费图像的边界部分，给图像的边界加边，如果让我做的话就不加边，边界部分受畸变影响较大，而且加边之后人为引入了一个偏置，不如减边。
### 提取FAST特征点
在提取FAST特征点的时候，对每一层的金字塔图像，先对图像进行网格划分，再在各个网格内提取FAST特征点，若在网格中未提取到特征点，则降低FAST特征点检测阈值再次检测。

![enter description here](./images/1699322800980.png)

在提取到图像中的FAST特征点之后，按四岔树将特征点分配到各个节点中。
### 计算描述子
在计算描述子时，先使用高斯滤波对图像进行平滑，这一步主要是避免噪声对描述子的干扰，之后在FAST特征点处提取`BRIEF`描述子。
### 特征点矫正

矫正畸变误差

- 径向畸变
$$
\begin{aligned}x_d&=x\left(1+k_1r^2+k_2r^4+k_3r^6+\ldots\right)\\y_d&=y\left(1+k_1r^2+k_2r^4+k_3r^6+\ldots\right)\end{aligned}
$$

- 切向畸变

$$
\begin{gathered}
x_{d} =x+(2p_1xy+p_2(r^2+2x^2)) \\
y_{d} =y+(p_1(r^2+2y^2)+2p_2xy) 
\end{gathered}
$$

## 特征点分配到网格

将特征点分配到网格上，加速匹配

### 速度初始化

使用恒速模型，当前速度等于上一帧速度