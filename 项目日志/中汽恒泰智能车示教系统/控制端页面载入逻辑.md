---
title: 控制端页面载入逻辑
tags: 
renderNumberedHeading: true
grammar_cjkRuby: true
---


控制端的入口文件为`main.py`,控制端可分为脱机模式和在线模式，具体代码在`main.py`第109行查看：

``` python
    def main_logic_loop(self):
        offline = False
        if offline:
            # 离线模式
            # self.user_info['user_type'] = 'student'
            self.user_info['user_type'] = 'teacher'
            # self.user_info['user_type'] = 'admin'
            self.user_info['user_code'] = '12'
            self.signal_load_main_window.emit()
            return
        # 在线模式
```

在线模式启动流程图如下：
```flow!
st=>start: 开始
e=>end: 结束
op0=>operation: 载入验证mac界面，验证mac地址
op1=>operation: 载入验证mac界面
op2=>operation: 等待0.1秒
op3=>operation: 转发响应
op4=>operation: 返回结果
op=>operation: 在
cond1=>condition: mac地址验证成功？
cond2=>condition: 是否超时？
cond3=>condition: 签名是否正确？
st->op0->op1->cond1
cond1(no)->op2->cond2
cond2(no)->cond1
cond2(yes)->op4

cond1(yes)->cond3
cond3(no)->cond1
cond3(yes)->op4

op4->e
```